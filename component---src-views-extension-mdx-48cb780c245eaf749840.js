(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"45nI":function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return c})),n.d(t,"default",(function(){return s}));n("5hJT"),n("W1QL"),n("K/PF"),n("t91x"),n("75LO"),n("PJhk");var a=n("/FXl"),o=n("TjRS");n("aD51");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var c={};void 0!==c&&c&&c===Object(c)&&Object.isExtensible(c)&&!c.hasOwnProperty("__filemeta")&&Object.defineProperty(c,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/views/extension.mdx"}});var i={_frontmatter:c},l=o.a;function s(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["components"]);return Object(a.b)(l,r({},i,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"extension"},"Extension"),Object(a.b)("p",null,"To make sure typings are correct we provide some functionality to identify mocks and the original type.\nIf you need your custom spies you can use our framework to specify and identify them.\nIn this way you will avoid casting and it will make your code much cleaner."),Object(a.b)("h2",{id:"custom-method"},"Custom Method"),Object(a.b)("p",null,"(this example is taken from jasmine-ts-auto-mock)","[https://github.com/Typescript-TDD/jasmine-ts-auto-mock]"),Object(a.b)("p",null,"To extend a method you need to:\n1) set your spy function (jasmine.createSpy(name))"),Object(a.b)("p",null,"Please note that the value returned from provideMethodWithDeferredValue will be a function.\nYou will need to make sure that the method you are providing will not execute the function directly because it will cause Maximum call stack size."),Object(a.b)("p",null,"In the example below it's using callFake that will prevent to execute the function directly."),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-ts"}),'import { Provider } from "ts-auto-mock/extension";\n\nProvider.instance.provideMethodWithDeferredValue((name: string, value: () => any) => {\n    return jasmine.createSpy(name).and.callFake(value);\n});\n')),Object(a.b)("p",null,"2) override the type of the return value"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-ts"}),"type ReturnType = jasmine.Spy;\n\ndeclare module 'ts-auto-mock/extension' {\n  interface Method<TR> extends ReturnType {}\n}\n")),Object(a.b)("h3",{id:"method-usage"},"Method Usage"),Object(a.b)("p",null,"1) create an interface"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-ts"}),"interface Interface {\n    methodToSpy: () => string\n}\n")),Object(a.b)("p",null,"2) create a mock"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-ts"}),"const mock: Interface = createMock<Interface>();\n")),Object(a.b)("p",null,"3) get the spy from the method\nYou can get the method in two different way"),Object(a.b)("p",null,"through a function that access to the mock"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-ts"}),'import { On, method } from "ts-auto-mock/extension";\nconst spy: jasmine.Spy = On(mock).get(method(mock => mock.methodToSpy));\n')),Object(a.b)("p",null,"directly as string"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-ts"}),"import { On, method } from \"ts-auto-mock/extension\";\nconst spy: jasmine.Spy = On(mock).get(method('methodToSpy'));\n")),Object(a.b)("p",null,"4) trigger the method"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-ts"}),"someMethodThatWillTriggerInterfaceA();\nexpect(spy).toHaveBeenCalled();\n")))}s&&s===Object(s)&&Object.isExtensible(s)&&!s.hasOwnProperty("__filemeta")&&Object.defineProperty(s,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/views/extension.mdx"}}),s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-views-extension-mdx-48cb780c245eaf749840.js.map